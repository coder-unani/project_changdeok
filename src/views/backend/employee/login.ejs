<%- include('../layouts/header') %>
  <h1>관리자 로그인</h1>
  <p>관리자 로그인 페이지입니다.</p>
  <form id="formAdminLogin">
    <ul>
      <li>
        <label for="email">이메일</label>
        <input type="email" id="email" name="email" placeholder="이메일" required>
      </li>
      <li>
        <div>
          <label for="password">비밀번호</label>
          <input type="password" id="password" name="password" placeholder="비밀번호" required>
          <span>
            <input type="checkbox" id="showPassword">
            <label for="showPassword">비밀번호 표시</label>
          </span>
        </div>
        <div>
          <p>비밀번호는 영문, 숫자, 특수문자를 포함하여 8자 이상으로 입력해주세요.</p>
        </div>
      </li>
      <li>
        <button type="submit">로그인</button>
      </li>
    </ul>
  </form>

  <script>
    document.getElementById('formAdminLogin').addEventListener('submit', async (e) => {
      e.preventDefault();

      // 폼 데이터 수집
      const formData = new FormData(e.target);

      // JSON 변환
      const data = {};
      formData.forEach((value, key) => {
          data[key] = value;
      });
      
      try {
        // POST 요청 보내기
        const response = await fetch('/api/admin/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        });
        
        // 응답 처리
        if (response.ok) {
          const result = await response.json();
          alert('로그인 성공');
          location.href = '/admin';

        } else {
          alert(response.statusText);

        }

      } catch (error) {
        console.error(error);
        alert('서버 오류가 발생했습니다.');

      }
    });
  </script>
<%- include('../layouts/footer') %>
