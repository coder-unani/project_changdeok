<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script nonce="<%=nonce%>">
  const alertMessage = (type, text, title = '', options = {}) => {
    const root = document.documentElement;
    const computedStyle = getComputedStyle(root);

    let icon = null;

    switch (type) {
      case 'success':
        icon = 'success';
        break;
      case 'error':
        icon = 'error';
        break;
      case 'warning':
        icon = 'warning';
        break;
      case 'question':
        icon = 'question';
        break;
      default:
        icon = 'info';
        break;
    }

    // 기본 옵션 설정
    const defaultOptions = {
      title: title || '',
      text: text || '',
      icon: icon,
      confirmButtonText: '확인',
      confirmButtonColor: computedStyle.getPropertyValue('--color-success').trim(),
      showClass: {
        popup: 'animate__animated animate__fadeInDown',
      },
      hideClass: {
        popup: 'animate__animated animate__fadeOutUp',
      },
    };

    // 사용자 정의 옵션과 기본 옵션 병합
    const swalOptions = {
      ...defaultOptions,
      ...options,
      // 중첩된 객체는 별도로 병합
      showClass: {
        ...defaultOptions.showClass,
        ...(options.showClass || {}),
      },
      hideClass: {
        ...defaultOptions.hideClass,
        ...(options.hideClass || {}),
      },
    };

    return Swal.fire(swalOptions);
  };

  const confirmMessage = (type, text, title = '', successText = '', options = {}) => {
    const root = document.documentElement;
    const computedStyle = getComputedStyle(root);

    let icon = null;

    switch (type) {
      case 'success':
        icon = 'success';
        break;
      case 'error':
        icon = 'error';
        break;
      case 'warning':
        icon = 'warning';
        break;
      case 'question':
        icon = 'question';
        break;
      default:
        icon = 'info';
        break;
    }
    const footer = options.footer || '';

    Swal.fire({
      ...(title && { title }),
      ...(text && { text }),
      ...(icon && { icon }),
      showCancelButton: true,
      confirmButtonColor: computedStyle.getPropertyValue('--color-success').trim(),
      cancelButtonColor: computedStyle.getPropertyValue('--color-error').trim(),
      cancelButtonText: '취소',
      confirmButtonText: '확인',
    }).then((result) => {
      if (result.isConfirmed) {
        Swal.fire({
          title: '성공',
          text: successText,
          icon: 'success',
        });
      }
    });
  };
</script>
