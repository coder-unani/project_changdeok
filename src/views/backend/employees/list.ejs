<div class="mt-2">
  <h1 class='flex justify-start items-center gap-1.5 py-2 text-center text-slate-700 transition-all'>
    <span class="orb-head"><%=title%></span>
  </h1>
</div>
<div class="py-2 mb-2">
  <div class="flex justify-between items-center">
    <div>
      <a href="<%=backendRoutes.employees.regist.url%>" class="orb-btn orb-btn-primary">관리자 등록</a>
    </div>
    <div class="flex-1 flex justify-end">
      <div class="relative w-full lg:max-w-[200px] ml-4">
        <input
        class="w-full pr-11 pl-4 py-3 bg-gray-200 text-gray-700 text-sm placeholder:text-gray-400 rounded-lg transition duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-200"
        placeholder="관리자 검색"
        />
        <button
        class="absolute h-8 w-8 inset-y-0 right-2 my-auto px-2 flex items-center bg-transparent rounded"
        type="button"
        >
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-8 h-8 text-gray-600">
          <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
        </svg>
        </button>
      </div>
    </div>
  </div>
</div>
<div class="orb-list">
  <div class="bg-white p-4 mb-4 lg:p-6 rounded-xl shadow-[0_2px_30px_rgba(0,0,0,.06)] overflow-x-auto">
    <!-- 게시물 개수 노출 -->
    <!-- <div class="flex justify-end pb-2">
      <p class="text-xs text-slate-500 lg:block">검색 결과: <b><%=metadata.total%></b>개</p>
    </div> -->
    <!-- 게시물 -->
    <table>
      <thead>
      <tr>
          <th class="w-24 min-w-24 text-center"><p class="text-xs lg:text-[13px] font-normal leading-none text-gray-500">번호</p></th>
          <th class="w-auto text-center"><p class="text-xs lg:text-[13px] font-normal leading-none text-gray-500">이메일</p></th>
          <th class="w-32 min-w-32 text-center"><p class="text-xs lg:text-[13px] font-normal leading-none text-gray-500">이름</p></th>
          <th class="hidden w-32 min-w-32 text-center lg:table-cell"><p class="text-xs lg:text-[13px] font-normal leading-none text-gray-500">생성일</p></th>
          <th class="hidden w-32 min-w-32 text-center lg:table-cell"><p class="text-xs lg:text-[13px] font-normal leading-none text-gray-500">마지막 로그인</p></th>
      </tr>
      </thead>
      <tbody>
        <% if (data.length === 0) { %>
          <tr>
            <td colspan="5" class="py-6 text-center"><p class="text-gray-400">등록된 관리자가 없습니다.</p></td>
          </tr>
        <% } else { %>
        <% data.forEach(employee => { %>
          <tr>
            <td class="text-center">
              <p><%=employee.id%></p>
            </td>
            <td>
              <a href="/admin/employees/<%=employee.id%>" class="hover:underline decoration-gray-800"><p><%=employee.email%></p></a>
            </td>
            <td>
              <a href="/admin/employees/<%=employee.id%>" class="hover:underline decoration-gray-800"><p><%=employee.name%></p></a>
            </td>
            <td class="hidden lg:table-cell text-center">
              <p><%=employee.createdAt%></p>
            </td>
            <td class="hidden lg:table-cell text-center">
              <p><%=employee.lastLoginAt ?? '-' %></p>
            </td>
          </tr>
        <% }); } %>
      </tbody>
    </table>
  </div>
  <div class="bg-white py-2 lg:py-4 rounded-xl shadow-[0_2px_30px_rgba(0,0,0,.06)]">
    <!-- 페이지 버튼 -->
    <% if (metadata.totalPage >= 1) { %>
      <div class="flex justify-center space-x-1">
        <% if (metadata.page > 1) { %>
          <button><a href="?page=<%=metadata.page - 1%>">이전</a></button>
        <% } %>
        <% 
          let startPage = metadata.page - 2;
          if (startPage < 1) startPage = 1;
          const endPage = metadata.page + 2 > metadata.totalPage ? metadata.totalPage : metadata.page + 2;
          for (let i = startPage; i <= endPage; i++) { %> 
            <button class="<%if (i === metadata.page) {%>active<%}%>"><a href="?page=<%=i%>"><%=i%></a></button>
          <% } %>
          <% if (metadata.page < metadata.totalPage) { %>
            <button><a href="?page=<%=metadata.page + 1%>">다음</a></button>
          <% } %>
      </div>
    <% } %>
  </div>
</div>